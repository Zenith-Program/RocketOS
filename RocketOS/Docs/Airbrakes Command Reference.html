<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Airbrakes Command Line Interface Reference Guide</title>
    <style>
        body {
            font-family: sans-serif;
            line-height: 1.6;
            margin: 20px;
        }
        details {
            margin-left: 20px;
        }
        summary {
            cursor: pointer;
            font-weight: bold;
        }
        .description {
            margin-left: 20px;
            color: #555;
        }
        .hidden {
            display: none;
        }
        .highlight {
            background-color: yellow;
        }
        input[type="text"] {
            width: 300px;
            padding: 5px;
            margin-bottom: 20px;
        }
        button {
            margin-right: 10px;
            padding: 5px 10px;
        }
	table {
    		border-collapse: collapse;
    		margin: 15px 0;
    		width: 100%;
    		max-width: 800px;
	}
	table, th, td {
    		border: 1px solid #ccc;
	}
	th, td {
    		padding: 8px 12px;
    		text-align: left;
	}
	th {
    		background-color: #f0f0f0;
	}
    </style>
    <!-- Marked.js for Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
    <h1>Airbrakes Command Line Interface Reference Guide</h1>

    <div id="root-description"></div>

    <div id="controls">
        <button id="expandAllBtn">Expand All</button>
        <button id="collapseAllBtn">Collapse All</button><br><br>
        <input type="text" id="searchBox" placeholder="Search commands...">
    </div>

    <div id="cli-tree"></div>

    <!-- Scripts Below -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        const tree = {
            "description": "This document explains how to use the airbrakes command line interface and provides a description of each available command.\n## Command Structure\nAll commands are prefixed with the **>** character. This is done to distinguish them from simulation data or other transmissions. Without the **>** character, the command interpreter will **ignore** the transmission.\nA **<** character is printed by the command interpreter following the completion of a command's execution. If the **<** character does not appear after a command is sent, it is likely that the device is in an unresponsive state.\n```\n>command\n<\n```\nCommands are organized into a tree structure which works in a way that is very similar to a file system. Commands may contain zero or more other commands, called subcommands, which are acessed by writing the base command followed by the subcommand.\nIf a command has one or more subcommands are also called directories. If a command is a directory (has subcommands), it does not have to be executable. Some directories are executable, others are not. \n```\n>baseCommand subCommand1\nThis is subcommand 1\n<\n\n>baseCommand directory1 subCommand2\nThis is subcommand 2\n<\n>baseCommand directory1\n<[Cmd:error] No default command exists for 'directory1' directory\n```\nCommands may have zero or more arguments, which are values provided by the user that are used in the execution of the command. Arguments are placed after the command name and are separated by whitespace if there are multiple.\n```\n>command 5 -3\n<\n\n>command subCommand 0.75\n<\n```\nThere are five types of arguments that commands may require. A command will not be executed if the number or type of arguments provided to it are incorrect.\n### Argument Types Table:\n\n| Type             | Symbol | Description                                        | Examples                        | Non-Examples                    |\n|------------------|--------|----------------------------------------------------|----------------------------------|----------------------------------|\n| integer          | i      | positive or negative number                       | -2, 4, 29                       | 2.5, 0b000101, 0xFF, name, \"-5\"  |\n| unsigned | u      | non-negative number; hexadecimal and binary ok    | 0, 12, 0xAb01, 0b01101          | -5, 0.26, name, \"6\"              |\n| float            | f      | positive or negative decimal number               | 0.25, -1.75, 12                 | 0xFF, name, \"0.75\"               |\n| word             | w      | text containing no whitespace                     | name, 0.5, 7, -6                | \"string data\"                    |\n| string           | s      | sequence of characters enclosed in quotes         | \"string data\", \"0.75\"           | 5, name                         |\n## Navigation Commands\nCommands that have subcommands are also called directories. The working directory is the directory whose subcommands are treated as the base commands. By default, the working directory will be set to the \"root\" directory, which is the root of the tree structure containing all of the commands. The working directory can be changed to any other directory in the command structure. There are a few builtin commands which are used to navigate the directories. These are called navigation commands.\n### Navigation Commands Table\n\n| Name             | Grammar | Description                                        |\n|------------------|--------|----------------------------------------------------|\n| cd          | suffix      | change the working directory                         |\n| wd | constituent      | print the working directory    |\n| rd            | constituent      | return the working directory to the root directory               |\n| ls             | suffix      | print all commands in the directory                     |\n| lsr           | suffix      | print all commands and subcommands in the directory         |\n\nNavigation commands can have constituent or suffix gramar, meaning that their usage is not identical. Navigation commands with constituent grammar are used like regular commands. They are written imideatly afther the **>** character and have no arguments or subcommands. The following example shows how to identify the working directory with **wd** and return to the root directory with **rd**.\n```\n>wd\nsomeDirectory\n<\n\n>rd\n<\n\n>wd\nroot\n<\n```\nNavigation commands with suffix grammar are used in combination with a directory, which is written before the navigation command. They also do not have any arguments or subcommands. The following example demonstrates the usage the navigation command **cd**, which has suffix grammar. \n```\n>baseCommand cd\n>\n\n>wd\nbaseCommand\n<\n\n>subcommand cd\n<\n\n>wd\nsubcommand\n<\n\n>rd\n<\n\n>baseCommand subcommand cd\n<\n\n>wd\nsubcommand\n<\n```\nThe navigation commands **ls** and **lsr** are used to print the subcommands of a directory. When printed, the arguments of each command are enclosed in braces **{}**. Directories are indicated with square brackets **[]**. If a directory is not executable, it will not have braces **{}**. The command **ls** only prints base commands of the prefixed directory. Any directories in the prefixed directory are displayed with **[...]** to signify that they have subcommands that are not shown. The command **lsr** expands the brackets and prints all subcommads recursively, with an increace in indentation for each level. Navigation commands are always acessable, but are not shown when using **ls** or **lsr**.\n```\n>lsr\nCommand1 [\n    Command1.1 {}\n    Command1.2 {s}\n]\nCommand2 {u} [\n    Command2.1 {f}\n    Command2.2 {} [\n        Command2.2.1 {i}\n    ]\n]\n<\n\n>ls\nCommand1 [...]\nCommand2 {u} [...]\n<\n\n>Command1 ls\nCommand1.1 {}\nCommand1.2 {s}\n<\n\n>Command2 cd\n<\n\n>lsr\nCommand2.1 {f}\nCommand2.2 {} [\n    Command2.2.1 {i}\n]\n<\n```\n## Airbrakes Command Dictionary",
            "children": {
                "arm": "Places the system into the armed state. This command is used to start both real and simulated flights. After arming, a series of information, warning, and error messages will appear. These messages are also logged to the sd card if logging is enabled. Do not launch if there are any warnings or error messages, unless you know what you are doing.\n\n**Arguments:** None",
		"disarm": "Disarms the system and ends any real or simulated flight. Use this command after recovering the system to ensure all data is saved correctly. This command will stop the controller, motor, telemetry, and event detection.\n\n**Arguments:** None",
		"state": "Prints the current state of the system.\n\n**Table of States**\n\n| State             | Description |\n|------------------|--------|\n| standby          | Initial state of the system. The system stays in this state until it is armed. All subsystems are functional in this state and can be tested with commands.      |\n| armed | First state after the system is armed. The system waits for a launch to occur and records telemetry.      |\n| boost            | This state occurs breifly when the motor accelerates the system. The system waits for burnout to occur before deploying the airbrakes and optionally switches to high speed buffering mode for telemetry.      |\n| coast             | The controller activates in the coast state along with the motor. The coast state occurs from burnout to apogee.      |\n| recovery           | The system enters the recovery state after apogee is detected. The airbrakes are retracted and shut down, the controller is stoped, but telemetry continues to be loged directly onto the sd card until the system is disarmed.      |\n\n**Arguments:** None",
		"safe": "Ensures that all systems are shutdown safe. Telemetry and log are flushed, persistent variables are saved, and the motor is shutdown. Use this before disconnecting power if you want to ensure that changes to persistent variables or files are not lost.\n\n**Arguments:** None",
		"restartSD": "Reinitializes the SD card. This may resolve loading or recording issues with the SD card if the connection was bad at startup. **Do not** remove or reinsert the SD card while the system is powered on or files may get corrupted.\n\n**Arguments:** None",
                "flight": {
                    "description": "The flight directory provides an interface for data and parameters relating to flight planing and event detection. Before a flight, it is good practice to look through this directory to ensure that all parameters are in the correct configuration.\n### Subcommands",
                    "children": {
                        "buffer": {
				"description": "This directory is for the buffering flight option, which allows the system to use high speed buffering for telemetry durring the boost and coast phases of flight. The advantage of using the buffering option is that intermitent delays from SD card writes will not occur while the time sensitive signal processing and control algorithims are running. In buffering mode, a loss of power will cause all buffered data to be lost. If the buffer overflows, formatting errors may occur in the recovered files, but data will not be lost. This option can be enabled or disabled for a real flight. If using this option, test that enough memory is allocated to the buffer to avoid an overflow.\n\n*This option is persistent, meaning that it can be saved across resets and program updates. Use the **safe** command or **persistent save** command after making changes to persistent variables to save.*   \n### Default Command\nPrints weather the option is set or cleared. If it is set then telemetry buffering will occur. Otherwise telemetry will be recorded directly to the SD card.\n\n**Arguments:** None\n### Subcommands",
                    		"children": {
					"set": "Enables telemetry buffering mode.\n\n**Arguments:** None",
					"clear": "Disables telemetry buffering mode.\n\n**Arguments:** None"
				}
			},
                        "actuators": {
				"description": "This directory is for the actuators flight option, which controls weather the actuators will be enabled durring flight. This option can be used to disable the actuators durring ground tests, or to configure a control flight where actuation is disabled but other flight systems are active. **Warning**: The airbrakes will not deploy durring flight if this option is not set. Make sure that it is set for a real flight. When arming the system, a warning message will appear if this option is not set. The actuators can be used normally through the **motor** directory even if disabled for flight. The actuators option only effects the flight logic responsible for deploying the actuators.\n\n*This option is persistent, meaning that it can be saved across resets and program updates. Use the **safe** command or **persistent save** command after making changes to persistent variables to save.*\n### Default Command\nPrints weather the option is set or cleared. If it is set then the actuators will be enabled durring flight. Otherwise, the actuators will be disabled.\n\n**Arguments:** None\n### Subcommands",
                    		"children": {
					"set": "Enables the actuators durring flight.\n\n**Arguments:** None",
					"clear": "Disables the actuators durring flight.\n\n**Arguments:** None"
				}
			},
			"sample": {
				"description": "This directory is for the sample parameter, which controls the rate at which the event detection system samples the vehicles state. This parameter can be used to tune the event detection system. The sample parameter is the time in millisecods between checks made by the event detection system. A shorter sample period gives quicker response, but is more suceptable to noise or error.\n\n*This parameter is persistent, meaning that it can be saved across resets and program updates. Use the **safe** command or **persistent save** command after making changes to persistent variables to save.*\n### Default Command\nPrints the current sample period of the event detection system.\n\n**Arguments:** None\n### Subcommands",
                    		"children": {
					"set": "Changes the sample period of the event detection system.\n\n**Arguments:** *Unisgned* - New value in milliseconds"
				}
			},
			"launch":{
				"description": "This directory is for the launch event detection parameters. The vehicle's altitude, vertical velocity, and acceleration must all meet a threshold in consecutive samples for a launch event to occur. The threshold values and number of consectve samples are parameters that can be acessed through this directory.\n### Subcommands",
                    		"children": {
					"properties": "Prints all launch event detection parameters.\n\n**Arguments:** None",
					"altitude":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					},
					"velocity":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					},
					"acceleration":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					},
					"samples":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					},
					"time":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					}
						
				}
			},
			"burnout":{
				"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    		"children": {
					"properties": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
					"altitude":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					},
					"velocity":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					},
					"acceleration":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					},
					"samples":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					},
					"time":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					}
						
				}
			},
			"apogee":{
				"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    		"children": {
					"properties": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
					"altitude":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					},
					"velocity":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					},
					"acceleration":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					},
					"samples":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					},
					"time":{
						"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    				"children": {
							"set": "des\n\n**Arguments:** None"
						}
					}
						
				}
			},
			"plan": {
				"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    		"children": {
					"properties": "des\n\n**Arguments:** None",
					"load": "des\n\n**Arguments:** None",
					"altitude": "des\n\n**Arguments:** None",
					"gradient": "des\n\n**Arguments:** None",
				}
			}
                    }
                },
		"controller": {
			"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    	"children": {
				"start": "des\n\n**Arguments:** None",
				"stop": "des\n\n**Arguments:** None",
				"period":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"set": "des\n\n**Arguments:** None"
					}
				},
				"decay":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"set": "des\n\n**Arguments:** None"
					}
				},
				"coast":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"set": "des\n\n**Arguments:** None"
					}
				}
			}
		},
		"log": {
			"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    	"children": {
				"new": "des\n\n**Arguments:** None",
				"name":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"set": "des\n\n**Arguments:** None"
					}
				},
				"mode":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"buffer": "des\n\n**Arguments:** None",
						"record": "des\n\n**Arguments:** None"
					}
				},
				"override":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"set": "des\n\n**Arguments:** None",
						"clear": "des\n\n**Arguments:** None"
					}
				}
			}
		},
		"telemetry": {
			"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    	"children": {
				"new": "des\n\n**Arguments:** None",
				"name":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"set": "des\n\n**Arguments:** None"
					}
				},
				"mode":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"buffer": "des\n\n**Arguments:** None",
						"record": "des\n\n**Arguments:** None"
					}
				},
				"refresh":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"set": "des\n\n**Arguments:** None"
					}
				},
				"override":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"set": "des\n\n**Arguments:** None",
						"clear": "des\n\n**Arguments:** None"
					}
				}
			}
		},
		"persistent": {
			"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    	"children": {
				"save": "des\n\n**Arguments:** None",
				"restore":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"defaults": "des\n\n**Arguments:** None"
					}
				}
			}
		},
		"sim": {
			"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    	"children": {
				"start": "des\n\n**Arguments:** None",
				"stop": "des\n\n**Arguments:** None",
				"refresh":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"set": "des\n\n**Arguments:** None"
					}
				}
			}
		},
		"altimeter": {
			"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    	"children": {
				"pressure": "des\n\n**Arguments:** None",
				"temperature": "des\n\n**Arguments:** None",
				"altitude": "des\n\n**Arguments:** None",
				"zero": "des\n\n**Arguments:** None",
				"init":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"get": "des\n\n**Arguments:** None"
					}
				},
				"speed":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"set": "des\n\n**Arguments:** None"
					}
				}
			}
		},
		"imu": {
			"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    	"children": {
				"status": "des\n\n**Arguments:** None",
				"tare": "des\n\n**Arguments:** None",
				"reset": "des\n\n**Arguments:** None",
				"acceleration":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"period": "des\n\n**Arguments:** None",
						"start": "des\n\n**Arguments:** None",
						"stop": "des\n\n**Arguments:** None"
					}
				},
				"orientation":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"period": "des\n\n**Arguments:** None",
						"start": "des\n\n**Arguments:** None",
						"stop": "des\n\n**Arguments:** None"
					}
				},
				"rotation":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"period": "des\n\n**Arguments:** None",
						"start": "des\n\n**Arguments:** None",
						"stop": "des\n\n**Arguments:** None"
					}
				},
				"gravity":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"period": "des\n\n**Arguments:** None",
						"start": "des\n\n**Arguments:** None",
						"stop": "des\n\n**Arguments:** None"
					}
				},
				"periods":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"set": "des\n\n**Arguments:** None"
					}
				},
				"speed":{
					"description": "des\n\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"set": "des\n\n**Arguments:** None"
					}
				}
			}
		},
		"motor": {
			"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    	"children": {
				"position": "des\n\n**Arguments:** None",
				"start": "des\n\n**Arguments:** None",
				"stop": "des\n\n**Arguments:** None",
				"zero": "des\n\n**Arguments:** None",
				"tare": "des\n\n**Arguments:** None",
				"speed": "des\n\n**Arguments:** None",
				"target":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"set": "des\n\n**Arguments:** None"
					}
				},
				"mode":{
					"description": "des\n### Default Command\n**Arguments:** None\n### Subcommands",
                    			"children": {
						"full": "des\n\n**Arguments:** None",
						"half": "des\n\n**Arguments:** None",
						"quarter": "des\n\n**Arguments:** None",
						"micro": "des\n\n**Arguments:** None"
					}
				}
			}
		}
            }
        };

        const rootDescriptionContainer = document.getElementById('root-description');
        const treeContainer = document.getElementById('cli-tree');

        // Render Root Description using Markdown
        if (tree.description) {
            rootDescriptionContainer.innerHTML = marked.parse(tree.description);
            rootDescriptionContainer.className = 'description';
        }

        // Build Tree Function
        function buildTree(node) {
            const fragment = document.createDocumentFragment();
            for (const key in node) {
                const value = node[key];
                const details = document.createElement('details');
                const summary = document.createElement('summary');
                summary.textContent = key;
                details.appendChild(summary);

                if (typeof value === 'string') {
                    const desc = document.createElement('div');
                    desc.innerHTML = marked.parse(value);
                    desc.className = 'description';
                    details.appendChild(desc);
                } else if (typeof value === 'object') {
                    if (value.description) {
                        const desc = document.createElement('div');
                        desc.innerHTML = marked.parse(value.description);
                        desc.className = 'description';
                        details.appendChild(desc);
                    }
                    if (value.children) {
                        details.appendChild(buildTree(value.children));
                    }
                }

                fragment.appendChild(details);
            }
            return fragment;
        }

        // Render Tree Children
        if (tree.children) {
            treeContainer.appendChild(buildTree(tree.children));
        }

        // Search & Expand/Collapse Functionality
        const searchBox = document.getElementById('searchBox');

        searchBox.addEventListener('input', function() {
            const query = this.value.toLowerCase();
            const detailsElements = treeContainer.querySelectorAll('details');

            // Reset all nodes
            detailsElements.forEach(d => {
                d.classList.remove('hidden');
                d.open = false;
                d.querySelectorAll('.highlight').forEach(el => el.classList.remove('highlight'));
            });

            if (query === '') {
                return;
            }

            detailsElements.forEach(details => {
                const summary = details.querySelector('summary');
                const desc = details.querySelector('.description');

                let matches = false;

                if (summary && summary.textContent.toLowerCase().includes(query)) {
                    summary.classList.add('highlight');
                    matches = true;
                }

                if (desc && desc.textContent.toLowerCase().includes(query)) {
                    highlightMatches(desc, query);
                    matches = true;
                }

                if (matches) {
                    let current = details;
                    while (current && current.tagName === 'DETAILS') {
                        current.open = true;
                        current = current.parentElement.closest('details');
                    }
                } else {
                    if (!hasMatchingDescendant(details, query)) {
                        details.classList.add('hidden');
                    }
                }
            });
        });

        function hasMatchingDescendant(details, query) {
            const summaries = details.querySelectorAll('summary');
            const descriptions = details.querySelectorAll('.description');
            for (const s of summaries) {
                if (s.textContent.toLowerCase().includes(query)) return true;
            }
            for (const d of descriptions) {
                if (d.textContent.toLowerCase().includes(query)) return true;
            }
            return false;
        }

        function highlightMatches(element, query) {
            const textNodes = Array.from(element.childNodes).filter(n => n.nodeType === 3);
            textNodes.forEach(node => {
                const regex = new RegExp(`(${query})`, 'gi');
                const parts = node.textContent.split(regex);
                if (parts.length > 1) {
                    const fragment = document.createDocumentFragment();
                    parts.forEach(part => {
                        if (part.toLowerCase() === query) {
                            const highlightSpan = document.createElement('span');
                            highlightSpan.className = 'highlight';
                            highlightSpan.textContent = part;
                            fragment.appendChild(highlightSpan);
                        } else {
                            fragment.appendChild(document.createTextNode(part));
                        }
                    });
                    node.parentNode.replaceChild(fragment, node);
                }
            });
        }

        // Expand/Collapse All Buttons
        document.getElementById('expandAllBtn').addEventListener('click', () => {
            const detailsElements = treeContainer.querySelectorAll('details');
            detailsElements.forEach(d => d.open = true);
        });

        document.getElementById('collapseAllBtn').addEventListener('click', () => {
            const detailsElements = treeContainer.querySelectorAll('details');
            detailsElements.forEach(d => d.open = false);
        });
    </script>
</body>